{% assign review_submitted = false %}
{% if request.query.review_submitted == 'true' %}
  {% assign review_submitted = true %}
{% endif %}

<div class="review-form-wrapper">
  {% if review_submitted %}
    <div class="review-success">
      <div class="review-success-icon">&#10003;</div>
      <h2>Thank You!</h2>
      <p>Your review has been submitted. We'll verify it shortly to keep spam away.</p>
    </div>
  {% else %}
    <h2>Share Your Experience</h2>
    <form method="post" action="/contact" accept-charset="UTF-8" class="review-form">
      <input type="hidden" name="form_type" value="contact">
      <input type="hidden" name="utf8" value="âœ“">
      <input type="hidden" name="contact[tags]" value="Customer Review Submission">
      <input type="hidden" name="contact[Source]" value="Review Form">
      <input type="hidden" name="return_to" value="{{ request.path }}?review_submitted=true">

      <label for="ReviewName">Name</label>
      <input required type="text" id="ReviewName" name="contact[name]" placeholder="Your Name">

      <label for="ReviewEmail">Email</label>
      <input required type="email" id="ReviewEmail" name="contact[email]" placeholder="Your Email">

      <div class="review-rating-field">
        <label>Rating</label>
        <div class="star-rating">
          <div class="star-rating-group">
            <input type="radio" id="rating-5" name="contact[rating]" value="5" checked><label for="rating-5">&#9733;</label>
            <input type="radio" id="rating-4" name="contact[rating]" value="4"><label for="rating-4">&#9733;</label>
            <input type="radio" id="rating-3" name="contact[rating]" value="3"><label for="rating-3">&#9733;</label>
            <input type="radio" id="rating-2" name="contact[rating]" value="2"><label for="rating-2">&#9733;</label>
            <input type="radio" id="rating-1" name="contact[rating]" value="1"><label for="rating-1">&#9733;</label>
          </div>
        </div>
      </div>

      <label for="ReviewBody">Your Review</label>
      <textarea required id="ReviewBody" name="contact[body]" rows="5" placeholder="What did you think?"></textarea>

      <button type="submit">Submit Review</button>
    </form>
  {% endif %}
</div>

<style>
.review-form-wrapper {
  max-width: 600px;
  margin: 0 auto;
  padding: 2rem;
  background: #fafafa;
  border-radius: 8px;
  font-family: 'Assistant', sans-serif;
}
.review-form input, .review-form textarea {
  width: 100%;
  padding: 0.75rem;
  margin-bottom: 1rem;
  border-radius: 4px;
  border: 1px solid #ddd;
  font-family: 'Assistant', sans-serif;
}
.review-success {
  text-align: center;
  padding: 2rem 1rem;
  font-family: 'Assistant', sans-serif;
}
.review-success-icon {
  width: 56px;
  height: 56px;
  background: #e8f5e8;
  color: #2d6a4f;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  font-weight: 800;
  margin-bottom: 12px;
}
.review-success h2 {
  font-family: 'Assistant', sans-serif;
  color: #1a3a2a;
  margin-bottom: 8px;
}
.review-success p {
  color: #555;
  font-size: 15px;
  line-height: 1.5;
}
.review-rating-field {
  margin-bottom: 1rem;
  font-family: 'Assistant', sans-serif;
}
.star-rating {
  display: flex;
  align-items: center;
  margin-top: 0.5rem;
}
.star-rating-group {
  display: flex;
  flex-direction: row-reverse;
  font-size: 1.8rem;
}
.star-rating-group input {
  display: none;
}
.star-rating-group label {
  color: #ddd;
  cursor: pointer;
  margin: 0 2px;
  transition: color 0.2s;
}
.star-rating-group:hover label {
  color: #FFD700;
}
.star-rating-group input:checked ~ label {
  color: #FFD700;
}
.star-rating-group label:hover,
.star-rating-group label:hover ~ label {
  color: #FFD700;
}
.star-rating-group input:checked + label:hover,
.star-rating-group input:checked ~ label:hover,
.star-rating-group input:checked ~ label:hover ~ label,
.star-rating-group label:hover ~ input:checked ~ label {
  color: #FFED85;
}
.review-form-wrapper button {
  font-family: 'Assistant', sans-serif;
}
</style>