{% comment %}
  Request a Quote Page — Dani Cleans
  Primary conversion page — linked from 38+ CTAs across the site.
  Accepts service type, property details, and scheduling preferences.
  Pre-selects plan from URL params (?plan=biweekly-cleaning, etc.)
{% endcomment %}

{% assign form_success = false %}
{% if request.query.success == 'true' and request.query.form_type == 'contact' %}
  {% assign form_success = true %}
{% endif %}

<div class="quote-page">
  <!-- Hero -->
  <section class="quote-hero">
    <div class="quote-container">
      <h1>Get Your Free Estimate</h1>
      <p>Tell us about your property and we'll send a custom quote — usually within a few hours. No obligations, no pressure.</p>
    </div>
  </section>

  <!-- Main Content -->
  <section class="quote-main">
    <div class="quote-container">
      <div class="quote-grid">
        <!-- Left: Form -->
        <div class="quote-form-wrap">
          {% if form_success %}
            <div class="quote-success">
              <div class="quote-success-icon">&#10003;</div>
              <h2>Quote Request Received!</h2>
              <p>We've got your details and will send you a custom quote within a few hours (usually much faster).</p>
              <p>Need it sooner? Call us directly:</p>
              <a href="tel:4343510335" class="quote-success-phone">434-351-0335</a>
              <div class="quote-success-next">
                <h3>What Happens Next</h3>
                <ol>
                  <li>We review your property details</li>
                  <li>You'll receive a clear, itemized quote via email</li>
                  <li>If it looks good, we schedule your first service</li>
                  <li>Most customers are booked within 48 hours</li>
                </ol>
              </div>
            </div>
          {% else %}
            <h2>Tell Us About Your Property</h2>
            <p class="quote-form-sub">All fields marked * are required. We'll get back to you within a few hours.</p>

            <form method="post" action="/contact" accept-charset="UTF-8" class="quote-form" id="quoteForm">
              <input type="hidden" name="form_type" value="contact">
              <input type="hidden" name="utf8" value="✓">
              <input type="hidden" name="contact[Source]" value="Request a Quote Page">
              <input type="hidden" name="return_to" value="{{ page.url }}?form_type=contact&success=true">
              <input type="hidden" name="contact[Selected Plan]" id="selectedPlan" value="">

              <!-- Contact Info -->
              <fieldset class="quote-fieldset">
                <legend>Your Contact Info</legend>
                <div class="quote-row">
                  <div class="quote-field">
                    <label for="QuoteName">Full Name *</label>
                    <input type="text" id="QuoteName" name="contact[name]" required placeholder="Your name">
                  </div>
                  <div class="quote-field">
                    <label for="QuoteEmail">Email *</label>
                    <input type="email" id="QuoteEmail" name="contact[email]" required placeholder="your@email.com">
                  </div>
                </div>
                <div class="quote-row">
                  <div class="quote-field">
                    <label for="QuotePhone">Phone *</label>
                    <input type="tel" id="QuotePhone" name="contact[Phone Number]" required placeholder="(434) 555-1234">
                  </div>
                  <div class="quote-field">
                    <label for="QuoteHow">How did you hear about us?</label>
                    <select id="QuoteHow" name="contact[How Heard]">
                      <option value="">Select...</option>
                      <option value="Google Search">Google Search</option>
                      <option value="Facebook">Facebook</option>
                      <option value="Instagram">Instagram</option>
                      <option value="Nextdoor">Nextdoor</option>
                      <option value="Referral">Friend / Referral</option>
                      <option value="Lawn Sign">Saw our lawn sign</option>
                      <option value="Repeat Customer">Repeat Customer</option>
                      <option value="Other">Other</option>
                    </select>
                  </div>
                </div>
              </fieldset>

              <!-- Service Selection -->
              <fieldset class="quote-fieldset">
                <legend>Service Details</legend>
                <div class="quote-row">
                  <div class="quote-field">
                    <label for="QuoteService">Service Needed *</label>
                    <select id="QuoteService" name="contact[Service Type]" required>
                      <option value="">Select a service...</option>
                      <optgroup label="Home Cleaning">
                        <option value="Recurring Cleaning">Recurring Cleaning (Weekly/Bi-Weekly/Monthly)</option>
                        <option value="Deep Cleaning">Deep Cleaning (One-Time)</option>
                        <option value="Move-In/Move-Out">Move-In / Move-Out Cleaning</option>
                        <option value="Post-Construction">Post-Construction Cleanup</option>
                      </optgroup>
                      <optgroup label="Lawn & Landscaping">
                        <option value="Lawn Mowing">Lawn Mowing & Maintenance</option>
                        <option value="Landscaping">Landscaping & Garden Design</option>
                        <option value="Seasonal Cleanup">Seasonal Cleanup</option>
                      </optgroup>
                      <optgroup label="Additional Services">
                        <option value="Pressure Washing">Pressure Washing</option>
                        <option value="Window Cleaning">Window Cleaning</option>
                        <option value="Holiday Lights">Holiday Light Installation</option>
                        <option value="Junk Removal">Junk Removal</option>
                      </optgroup>
                      <optgroup label="Bundles">
                        <option value="Cleaning + Lawn Bundle">Cleaning + Lawn Care Bundle (Save 10%)</option>
                      </optgroup>
                      <optgroup label="Commercial">
                        <option value="Commercial Cleaning">Commercial / Office Cleaning</option>
                        <option value="Commercial Grounds">Commercial Grounds Maintenance</option>
                      </optgroup>
                      <option value="Not Sure">Not sure — help me decide</option>
                    </select>
                  </div>
                  <div class="quote-field">
                    <label for="QuoteFreq">Preferred Frequency</label>
                    <select id="QuoteFreq" name="contact[Frequency]">
                      <option value="">Select...</option>
                      <option value="Weekly">Weekly (Save 20%)</option>
                      <option value="Bi-Weekly">Bi-Weekly (Save 10%) — Most Popular</option>
                      <option value="Monthly">Monthly</option>
                      <option value="One-Time">One-Time</option>
                      <option value="Not Sure">Not sure yet</option>
                    </select>
                  </div>
                </div>
              </fieldset>

              <!-- Property Details -->
              <fieldset class="quote-fieldset">
                <legend>Property Details</legend>
                <div class="quote-row">
                  <div class="quote-field">
                    <label for="QuoteAddress">Property Address *</label>
                    <input type="text" id="QuoteAddress" name="contact[Property Address]" required placeholder="123 Main St, Charlottesville, VA">
                  </div>
                </div>
                <div class="quote-row">
                  <div class="quote-field">
                    <label for="QuoteBeds">Bedrooms</label>
                    <select id="QuoteBeds" name="contact[Bedrooms]">
                      <option value="">Select...</option>
                      <option value="1">1 Bedroom</option>
                      <option value="2">2 Bedrooms</option>
                      <option value="3">3 Bedrooms</option>
                      <option value="4">4 Bedrooms</option>
                      <option value="5+">5+ Bedrooms</option>
                    </select>
                  </div>
                  <div class="quote-field">
                    <label for="QuoteBaths">Bathrooms</label>
                    <select id="QuoteBaths" name="contact[Bathrooms]">
                      <option value="">Select...</option>
                      <option value="1">1 Bathroom</option>
                      <option value="1.5">1.5 Bathrooms</option>
                      <option value="2">2 Bathrooms</option>
                      <option value="2.5">2.5 Bathrooms</option>
                      <option value="3">3 Bathrooms</option>
                      <option value="3.5+">3.5+ Bathrooms</option>
                    </select>
                  </div>
                </div>
                <div class="quote-row">
                  <div class="quote-field">
                    <label for="QuoteSqft">Approx. Square Footage</label>
                    <select id="QuoteSqft" name="contact[Square Footage]">
                      <option value="">Select...</option>
                      <option value="Under 1000">Under 1,000 sq ft</option>
                      <option value="1000-1500">1,000 - 1,500 sq ft</option>
                      <option value="1500-2000">1,500 - 2,000 sq ft</option>
                      <option value="2000-2500">2,000 - 2,500 sq ft</option>
                      <option value="2500-3000">2,500 - 3,000 sq ft</option>
                      <option value="3000+">3,000+ sq ft</option>
                    </select>
                  </div>
                  <div class="quote-field">
                    <label for="QuotePets">Pets?</label>
                    <select id="QuotePets" name="contact[Pets]">
                      <option value="">Select...</option>
                      <option value="No pets">No pets</option>
                      <option value="Dog(s)">Dog(s)</option>
                      <option value="Cat(s)">Cat(s)</option>
                      <option value="Dogs and Cats">Dogs and Cats</option>
                      <option value="Other pets">Other</option>
                    </select>
                  </div>
                </div>
              </fieldset>

              <!-- Additional Info -->
              <div class="quote-field">
                <label for="QuoteNotes">Anything else we should know?</label>
                <textarea id="QuoteNotes" name="contact[body]" rows="4" placeholder="Special instructions, access info, areas of focus, timing preferences..."></textarea>
              </div>

              <button type="submit" class="quote-submit">Get My Free Estimate</button>
              <p class="quote-disclaimer">No contracts. No obligations. Most quotes delivered within a few hours.</p>
            </form>
          {% endif %}
        </div>

        <!-- Right: Sidebar -->
        <div class="quote-sidebar">
          <div class="quote-sidebar-card">
            <h3>Prefer to Talk?</h3>
            <p>Call or text us — we're real people, not a call center.</p>
            <a href="tel:4343510335" class="quote-sidebar-phone">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
              434-351-0335
            </a>
            <p class="quote-sidebar-hours">Mon-Fri 8am-6pm &bull; Sat 8am-4pm</p>
          </div>

          <div class="quote-sidebar-card">
            <h3>Why Dani Cleans?</h3>
            <ul class="quote-trust">
              <li>Locally owned in Charlottesville</li>
              <li>Fully insured &amp; bonded</li>
              <li>Background-checked teams</li>
              <li>100% satisfaction guarantee</li>
              <li>Eco-friendly products available</li>
              <li>Flexible scheduling</li>
              <li>No contracts — cancel anytime</li>
              <li>5-star rated on Google</li>
            </ul>
          </div>

          <div class="quote-sidebar-card quote-sidebar-review">
            <div class="quote-sidebar-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
            <p>"We got a quote within an hour and were booked the next day. The team was amazing — our house has never been this clean."</p>
            <span>— Sarah L., Charlottesville</span>
          </div>

          <div class="quote-sidebar-card">
            <h3>Save More</h3>
            <div class="quote-savings-tip">
              <strong>Bundle &amp; Save 10%</strong>
              <p>Combine cleaning + lawn care for an extra 10% off both services.</p>
              <a href="/pages/pricing?tab=bundle">View bundle pricing &rarr;</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<style>
.quote-page { color: #1a3a2a; }
.quote-container { max-width: 1100px; margin: 0 auto; padding: 0 20px; }

/* Hero */
.quote-hero {
  background: linear-gradient(135deg, #1a3a2a 0%, #2d6a4f 100%);
  color: #fff; padding: 64px 20px; text-align: center;
}
.quote-hero h1 { font-size: 40px; margin-bottom: 12px; line-height: 1.2; }
.quote-hero p { font-size: 18px; opacity: 0.9; max-width: 550px; margin: 0 auto; }

/* Main Grid */
.quote-main { padding: 48px 20px 64px; }
.quote-grid { display: grid; grid-template-columns: 1.6fr 1fr; gap: 40px; align-items: start; }

/* Form */
.quote-form-wrap {
  background: #fff; border: 2px solid #e0e8e0; border-radius: 16px; padding: 36px;
}
.quote-form-wrap h2 { font-size: 24px; margin-bottom: 4px; }
.quote-form-sub { color: #666; margin-bottom: 24px; font-size: 15px; }
.quote-fieldset {
  border: none; padding: 0; margin: 0 0 24px;
}
.quote-fieldset legend {
  font-size: 15px; font-weight: 700; color: #2d6a4f;
  text-transform: uppercase; letter-spacing: 0.5px;
  margin-bottom: 14px; padding-bottom: 8px;
  border-bottom: 2px solid #e8f0e8; width: 100%;
  display: block;
}
.quote-row { display: flex; gap: 16px; margin-bottom: 14px; }
.quote-field { flex: 1; }
.quote-field label {
  display: block; font-size: 14px; font-weight: 600;
  color: #1a3a2a; margin-bottom: 6px;
}
.quote-field input, .quote-field select, .quote-field textarea {
  width: 100%; padding: 12px 14px; border: 2px solid #e0e8e0;
  border-radius: 8px; font-size: 15px; font-family: inherit;
  transition: border-color 0.2s; background: #fff;
}
.quote-field input:focus, .quote-field select:focus, .quote-field textarea:focus {
  outline: none; border-color: #2d6a4f;
}
.quote-field textarea { resize: vertical; }
.quote-field select optgroup { font-weight: 600; color: #1a3a2a; }
.quote-submit {
  width: 100%; padding: 18px; background: #2d6a4f; color: #fff;
  border: none; border-radius: 8px; font-size: 17px; font-weight: 700;
  cursor: pointer; font-family: inherit; transition: background 0.2s, transform 0.2s;
  margin-top: 8px;
}
.quote-submit:hover { background: #245a42; transform: translateY(-1px); }
.quote-disclaimer {
  text-align: center; font-size: 13px; color: #888; margin-top: 12px;
}

/* Success */
.quote-success { text-align: center; padding: 32px 20px; }
.quote-success-icon {
  width: 72px; height: 72px; background: #e8f5e8; color: #2d6a4f;
  border-radius: 50%; display: inline-flex; align-items: center; justify-content: center;
  font-size: 32px; font-weight: 800; margin-bottom: 16px;
}
.quote-success h2 { font-size: 28px; margin-bottom: 8px; }
.quote-success > p { color: #555; margin-bottom: 8px; font-size: 16px; }
.quote-success-phone {
  display: inline-block; padding: 14px 36px; background: #2d6a4f; color: #fff;
  border-radius: 8px; font-size: 22px; font-weight: 800; text-decoration: none;
  margin: 12px 0 24px;
}
.quote-success-next {
  text-align: left; background: #f7faf7; border-radius: 12px;
  padding: 24px; max-width: 400px; margin: 0 auto;
}
.quote-success-next h3 { font-size: 16px; margin-bottom: 12px; }
.quote-success-next ol { padding-left: 20px; margin: 0; }
.quote-success-next li { padding: 4px 0; font-size: 14px; color: #555; }

/* Sidebar */
.quote-sidebar { display: flex; flex-direction: column; gap: 20px; }
.quote-sidebar-card {
  background: #f7faf7; border-radius: 12px; padding: 24px;
  border: 1px solid #e0e8e0;
}
.quote-sidebar-card h3 { font-size: 17px; margin-bottom: 8px; color: #1a3a2a; }
.quote-sidebar-card > p { font-size: 14px; color: #555; margin-bottom: 12px; }
.quote-sidebar-phone {
  display: flex; align-items: center; gap: 8px;
  font-size: 22px; font-weight: 800; color: #2d6a4f; text-decoration: none;
}
.quote-sidebar-phone:hover { color: #1a3a2a; }
.quote-sidebar-hours { font-size: 13px; color: #888; margin-top: 4px; margin-bottom: 0; }
.quote-trust { list-style: none; padding: 0; margin: 0; }
.quote-trust li {
  padding: 6px 0; font-size: 14px; color: #444;
  border-bottom: 1px solid #e8f0e8;
}
.quote-trust li:last-child { border-bottom: none; }
.quote-trust li::before { content: "\2713 "; color: #2d6a4f; font-weight: 700; }
.quote-sidebar-review { background: #fff; }
.quote-sidebar-stars { color: #f5a623; font-size: 18px; margin-bottom: 8px; }
.quote-sidebar-review > p {
  font-style: italic; font-size: 14px; color: #555; line-height: 1.6; margin-bottom: 8px;
}
.quote-sidebar-review span { font-size: 13px; color: #888; font-weight: 600; }
.quote-savings-tip strong { display: block; font-size: 15px; color: #2d6a4f; margin-bottom: 4px; }
.quote-savings-tip p { font-size: 13px; color: #555; margin-bottom: 8px; }
.quote-savings-tip a { font-size: 13px; color: #2d6a4f; font-weight: 600; text-decoration: none; }
.quote-savings-tip a:hover { text-decoration: underline; }

@media (max-width: 768px) {
  .quote-hero h1 { font-size: 28px; }
  .quote-hero { padding: 48px 20px; }
  .quote-grid { grid-template-columns: 1fr; }
  .quote-row { flex-direction: column; gap: 12px; }
  .quote-form-wrap { padding: 24px; }
}
</style>

<script>
(function() {
  // Pre-select service from URL params (e.g., from pricing page CTAs)
  var params = new URLSearchParams(window.location.search);
  var plan = params.get('plan');
  if (plan) {
    var planInput = document.getElementById('selectedPlan');
    if (planInput) planInput.value = plan;

    // Map plan param to form selections
    var serviceMap = {
      'monthly-cleaning': { service: 'Recurring Cleaning', freq: 'Monthly' },
      'biweekly-cleaning': { service: 'Recurring Cleaning', freq: 'Bi-Weekly' },
      'weekly-cleaning': { service: 'Recurring Cleaning', freq: 'Weekly' },
      'onetime-lawn': { service: 'Lawn Mowing', freq: 'One-Time' },
      'biweekly-lawn': { service: 'Lawn Mowing', freq: 'Bi-Weekly' },
      'weekly-lawn': { service: 'Lawn Mowing', freq: 'Weekly' },
      'biweekly-bundle': { service: 'Cleaning + Lawn Bundle', freq: 'Bi-Weekly' },
      'weekly-bundle': { service: 'Cleaning + Lawn Bundle', freq: 'Weekly' }
    };

    var mapping = serviceMap[plan];
    if (mapping) {
      var svcSelect = document.getElementById('QuoteService');
      var freqSelect = document.getElementById('QuoteFreq');
      if (svcSelect) {
        for (var i = 0; i < svcSelect.options.length; i++) {
          if (svcSelect.options[i].value === mapping.service) {
            svcSelect.selectedIndex = i;
            break;
          }
        }
      }
      if (freqSelect) {
        for (var j = 0; j < freqSelect.options.length; j++) {
          if (freqSelect.options[j].value === mapping.freq) {
            freqSelect.selectedIndex = j;
            break;
          }
        }
      }
    }
  }
})();
</script>
